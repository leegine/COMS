head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2011.03.29.00.29.13;	author zhang-tengyu;	state Exp;
branches;
next	;
deltatype	text;
kopt	b;
permissions	666;
commitid	5e04d9127cc1d69;
filename	web3-system_master_triggers.sql;


desc
@@


1.1
log
@*** empty log message ***
@
text
@------------------------------------------------------------------
-- Autogenerated per-table triggers for mutators
------------------------------------------------------------------

--------------------------------------------------
--- affinity_key_based_map

create trigger inv_affinity_key_based_map_ins
  after insert on affinity_key_based_map
  for each row
  declare
  begin
    invalidation.on_mutate( 'affinity_key_based_map', 'ins', 0, :new.app_id||','||:new.db_id );
  end;
/
show errors

create trigger inv_affinity_key_based_map_upd
  before update on affinity_key_based_map
  for each row
  declare
  begin
    invalidation.on_mutate( 'affinity_key_based_map', 'upd', 0, :old.app_id||','||:old.db_id );
  end;
/
show errors

create trigger inv_affinity_key_based_map_del
  before delete on affinity_key_based_map
  for each row
  declare
  begin
    invalidation.on_mutate( 'affinity_key_based_map', 'del', 0, :old.app_id||','||:old.db_id );
  end;
/
show errors

--------------------------------------------------
--- affinity_range_based_map

create trigger inv_affinity_range_based_m_ins
  after insert on affinity_range_based_map
  for each row
  declare
  begin
    invalidation.on_mutate( 'affinity_range_based_map', 'ins', 0, :new.key_start||','||:new.key_end||','||:new.range_order_no||','||:new.server_type||','||:new.ctx_name );
  end;
/
show errors

create trigger inv_affinity_range_based_m_upd
  before update on affinity_range_based_map
  for each row
  declare
  begin
    invalidation.on_mutate( 'affinity_range_based_map', 'upd', 0, :old.key_start||','||:old.key_end||','||:old.range_order_no||','||:old.server_type||','||:old.ctx_name );
  end;
/
show errors

create trigger inv_affinity_range_based_m_del
  before delete on affinity_range_based_map
  for each row
  declare
  begin
    invalidation.on_mutate( 'affinity_range_based_map', 'del', 0, :old.key_start||','||:old.key_end||','||:old.range_order_no||','||:old.server_type||','||:old.ctx_name );
  end;
/
show errors

@
