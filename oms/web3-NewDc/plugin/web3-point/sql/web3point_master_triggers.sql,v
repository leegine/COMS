head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2011.03.29.02.36.21;	author zhang-tengyu;	state Exp;
branches;
next	;
deltatype	text;
kopt	b;
permissions	666;
commitid	46c4d9145937ea6;
filename	web3point_master_triggers.sql;


desc
@@


1.1
log
@*** empty log message ***
@
text
@------------------------------------------------------------------
-- Autogenerated per-table triggers for mutators
------------------------------------------------------------------

--------------------------------------------------
--- point_category_master

create trigger inv_point_category_master_ins
  after insert on point_category_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_category_master', 'ins', 0, :new.institution_code||','||:new.category_no );
  end;
/
show errors

create trigger inv_point_category_master_upd
  before update on point_category_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_category_master', 'upd', 0, :old.institution_code||','||:old.category_no );
  end;
/
show errors

create trigger inv_point_category_master_del
  before delete on point_category_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_category_master', 'del', 0, :old.institution_code||','||:old.category_no );
  end;
/
show errors

--------------------------------------------------
--- point_convert_master

create trigger inv_point_convert_master_ins
  after insert on point_convert_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_convert_master', 'ins', 0, :new.institution_code||','||:new.branch_code||','||:new.fund_type||','||:new.tran_type||','||:new.buy_sell_div );
  end;
/
show errors

create trigger inv_point_convert_master_upd
  before update on point_convert_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_convert_master', 'upd', 0, :old.institution_code||','||:old.branch_code||','||:old.fund_type||','||:old.tran_type||','||:old.buy_sell_div );
  end;
/
show errors

create trigger inv_point_convert_master_del
  before delete on point_convert_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_convert_master', 'del', 0, :old.institution_code||','||:old.branch_code||','||:old.fund_type||','||:old.tran_type||','||:old.buy_sell_div );
  end;
/
show errors

--------------------------------------------------
--- point_premium_master

create trigger inv_point_premium_master_ins
  after insert on point_premium_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_premium_master', 'ins', 0, :new.institution_code||','||:new.premium_no );
  end;
/
show errors

create trigger inv_point_premium_master_upd
  before update on point_premium_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_premium_master', 'upd', 0, :old.institution_code||','||:old.premium_no );
  end;
/
show errors

create trigger inv_point_premium_master_del
  before delete on point_premium_master
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_premium_master', 'del', 0, :old.institution_code||','||:old.premium_no );
  end;
/
show errors

--------------------------------------------------
--- point_total

create trigger inv_point_total_ins
  after insert on point_total
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_total', 'ins', 0, :new.institution_code||','||:new.branch_code||','||:new.account_code||','||:new.period );
  end;
/
show errors

create trigger inv_point_total_upd
  before update on point_total
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_total', 'upd', 0, :old.institution_code||','||:old.branch_code||','||:old.account_code||','||:old.period );
  end;
/
show errors

create trigger inv_point_total_del
  before delete on point_total
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_total', 'del', 0, :old.institution_code||','||:old.branch_code||','||:old.account_code||','||:old.period );
  end;
/
show errors

--------------------------------------------------
--- point_trade_data

create trigger inv_point_trade_data_ins
  after insert on point_trade_data
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_trade_data', 'ins', 0, :new.rowid );
  end;
/
show errors

create trigger inv_point_trade_data_upd
  before update on point_trade_data
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_trade_data', 'upd', 0, :old.rowid );
  end;
/
show errors

create trigger inv_point_trade_data_del
  before delete on point_trade_data
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_trade_data', 'del', 0, :old.rowid );
  end;
/
show errors

--------------------------------------------------
--- point_apply

create trigger inv_point_apply_ins
  after insert on point_apply
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_apply', 'ins', 0, :new.apply_id );
  end;
/
show errors

create trigger inv_point_apply_upd
  before update on point_apply
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_apply', 'upd', 0, :old.apply_id );
  end;
/
show errors

create trigger inv_point_apply_del
  before delete on point_apply
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_apply', 'del', 0, :old.apply_id );
  end;
/
show errors

--------------------------------------------------
--- point_adjust

create trigger inv_point_adjust_ins
  after insert on point_adjust
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_adjust', 'ins', 0, :new.rowid );
  end;
/
show errors

create trigger inv_point_adjust_upd
  before update on point_adjust
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_adjust', 'upd', 0, :old.rowid );
  end;
/
show errors

create trigger inv_point_adjust_del
  before delete on point_adjust
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_adjust', 'del', 0, :old.rowid );
  end;
/
show errors

--------------------------------------------------
--- point_term

create trigger inv_point_term_ins
  after insert on point_term
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_term', 'ins', 0, :new.institution_code );
  end;
/
show errors

create trigger inv_point_term_upd
  before update on point_term
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_term', 'upd', 0, :old.institution_code );
  end;
/
show errors

create trigger inv_point_term_del
  before delete on point_term
  for each row
  declare
  begin
    invalidation.on_mutate( 'point_term', 'del', 0, :old.institution_code );
  end;
/
show errors

--------------------------------------------------
--- orix_trade_bonus_plan

create trigger inv_orix_trade_bonus_plan_ins
  after insert on orix_trade_bonus_plan
  for each row
  declare
  begin
    invalidation.on_mutate( 'orix_trade_bonus_plan', 'ins', 0, :new.institution_code||','||:new.branch_code||','||:new.account_code );
  end;
/
show errors

create trigger inv_orix_trade_bonus_plan_upd
  before update on orix_trade_bonus_plan
  for each row
  declare
  begin
    invalidation.on_mutate( 'orix_trade_bonus_plan', 'upd', 0, :old.institution_code||','||:old.branch_code||','||:old.account_code );
  end;
/
show errors

create trigger inv_orix_trade_bonus_plan_del
  before delete on orix_trade_bonus_plan
  for each row
  declare
  begin
    invalidation.on_mutate( 'orix_trade_bonus_plan', 'del', 0, :old.institution_code||','||:old.branch_code||','||:old.account_code );
  end;
/
show errors

@
