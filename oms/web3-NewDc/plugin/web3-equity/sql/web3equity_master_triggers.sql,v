head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2011.03.15.04.43.39;	author zhang-tengyu;	state Exp;
branches;
next	;
deltatype	text;
kopt	b;
permissions	666;
commitid	7a84d7eee2c1971;
filename	web3equity_master_triggers.sql;


desc
@@


1.1
log
@*** empty log message ***
@
text
@------------------------------------------------------------------
-- Autogenerated per-table triggers for mutators
------------------------------------------------------------------

--------------------------------------------------
--- equity_tick_values_mst

create trigger inv_equity_tick_values_mst_ins
  after insert on equity_tick_values_mst
  for each row
  declare
  begin
    invalidation.on_mutate( 'equity_tick_values_mst', 'ins', 0, :new.market_code||','||:new.low_price );
  end;
/
show errors

create trigger inv_equity_tick_values_mst_upd
  before update on equity_tick_values_mst
  for each row
  declare
  begin
    invalidation.on_mutate( 'equity_tick_values_mst', 'upd', 0, :old.market_code||','||:old.low_price );
  end;
/
show errors

create trigger inv_equity_tick_values_mst_del
  before delete on equity_tick_values_mst
  for each row
  declare
  begin
    invalidation.on_mutate( 'equity_tick_values_mst', 'del', 0, :old.market_code||','||:old.low_price );
  end;
/
show errors

--------------------------------------------------
--- equity_limit_price_range_mst

create trigger inv_equity_limit_price_ran_ins
  after insert on equity_limit_price_range_mst
  for each row
  declare
  begin
    invalidation.on_mutate( 'equity_limit_price_range_mst', 'ins', 0, :new.market_code||','||:new.low_price );
  end;
/
show errors

create trigger inv_equity_limit_price_ran_upd
  before update on equity_limit_price_range_mst
  for each row
  declare
  begin
    invalidation.on_mutate( 'equity_limit_price_range_mst', 'upd', 0, :old.market_code||','||:old.low_price );
  end;
/
show errors

create trigger inv_equity_limit_price_ran_del
  before delete on equity_limit_price_range_mst
  for each row
  declare
  begin
    invalidation.on_mutate( 'equity_limit_price_range_mst', 'del', 0, :old.market_code||','||:old.low_price );
  end;
/
show errors

--------------------------------------------------
--- order_carryover_skip_prod

create trigger inv_order_carryover_skip_p_ins
  after insert on order_carryover_skip_prod
  for each row
  declare
  begin
    invalidation.on_mutate( 'order_carryover_skip_prod', 'ins', 0, :new.institution_code||','||:new.product_code||','||:new.market_code );
  end;
/
show errors

create trigger inv_order_carryover_skip_p_upd
  before update on order_carryover_skip_prod
  for each row
  declare
  begin
    invalidation.on_mutate( 'order_carryover_skip_prod', 'upd', 0, :old.institution_code||','||:old.product_code||','||:old.market_code );
  end;
/
show errors

create trigger inv_order_carryover_skip_p_del
  before delete on order_carryover_skip_prod
  for each row
  declare
  begin
    invalidation.on_mutate( 'order_carryover_skip_prod', 'del', 0, :old.institution_code||','||:old.product_code||','||:old.market_code );
  end;
/
show errors

--------------------------------------------------
--- off_floor_order_product

create trigger inv_off_floor_order_produc_ins
  after insert on off_floor_order_product
  for each row
  declare
  begin
    invalidation.on_mutate( 'off_floor_order_product', 'ins', 0, :new.institution_code||','||:new.product_code||','||:new.market_code||','||to_char(:new.order_end_datetime, 'YYMMDDHH24MISS') );
  end;
/
show errors

create trigger inv_off_floor_order_produc_upd
  before update on off_floor_order_product
  for each row
  declare
  begin
    invalidation.on_mutate( 'off_floor_order_product', 'upd', 0, :old.institution_code||','||:old.product_code||','||:old.market_code||','||to_char(:old.order_end_datetime, 'YYMMDDHH24MISS') );
  end;
/
show errors

create trigger inv_off_floor_order_produc_del
  before delete on off_floor_order_product
  for each row
  declare
  begin
    invalidation.on_mutate( 'off_floor_order_product', 'del', 0, :old.institution_code||','||:old.product_code||','||:old.market_code||','||to_char(:old.order_end_datetime, 'YYMMDDHH24MISS') );
  end;
/
show errors

--------------------------------------------------
--- short_selling_restraint_time

create trigger inv_short_selling_restrain_ins
  after insert on short_selling_restraint_time
  for each row
  declare
  begin
    invalidation.on_mutate( 'short_selling_restraint_time', 'ins', 0, :new.institution_code||','||:new.branch_code||','||:new.market_code||','||:new.biz_date_type||','||:new.start_time );
  end;
/
show errors

create trigger inv_short_selling_restrain_upd
  before update on short_selling_restraint_time
  for each row
  declare
  begin
    invalidation.on_mutate( 'short_selling_restraint_time', 'upd', 0, :old.institution_code||','||:old.branch_code||','||:old.market_code||','||:old.biz_date_type||','||:old.start_time );
  end;
/
show errors

create trigger inv_short_selling_restrain_del
  before delete on short_selling_restraint_time
  for each row
  declare
  begin
    invalidation.on_mutate( 'short_selling_restraint_time', 'del', 0, :old.institution_code||','||:old.branch_code||','||:old.market_code||','||:old.biz_date_type||','||:old.start_time );
  end;
/
show errors

@
