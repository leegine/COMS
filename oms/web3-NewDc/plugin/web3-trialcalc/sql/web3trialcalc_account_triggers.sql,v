head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2011.03.29.01.33.16;	author zhang-tengyu;	state Exp;
branches;
next	;
deltatype	text;
kopt	b;
permissions	666;
commitid	3f04d9136db4e96;
filename	web3trialcalc_account_triggers.sql;


desc
@@


1.1
log
@*** empty log message ***
@
text
@------------------------------------------------------------------
-- Autogenerated per-table triggers for mutators
------------------------------------------------------------------

--------------------------------------------------
--- account_portfolio

create trigger inv_account_portfolio_ins
  after insert on account_portfolio
  for each row
  declare
  begin
    invalidation.on_mutate( 'account_portfolio', 'ins', :new.account_id, :new.institution_code||','||:new.branch_id||','||:new.account_id||','||:new.portfolio_code );
  end;
/
show errors

create trigger inv_account_portfolio_upd
  before update on account_portfolio
  for each row
  declare
  begin
    invalidation.on_mutate( 'account_portfolio', 'upd', :old.account_id, :old.institution_code||','||:old.branch_id||','||:old.account_id||','||:old.portfolio_code );
  end;
/
show errors

create trigger inv_account_portfolio_del
  before delete on account_portfolio
  for each row
  declare
  begin
    invalidation.on_mutate( 'account_portfolio', 'del', :old.account_id, :old.institution_code||','||:old.branch_id||','||:old.account_id||','||:old.portfolio_code );
  end;
/
show errors

--------------------------------------------------
--- account_portfolio_product

create trigger inv_account_portfolio_prod_ins
  after insert on account_portfolio_product
  for each row
  declare
  begin
    invalidation.on_mutate( 'account_portfolio_product', 'ins', :new.account_id, :new.institution_code||','||:new.branch_id||','||:new.account_id||','||:new.portfolio_code||','||:new.product_id||','||:new.market_code||','||:new.buy_price );
  end;
/
show errors

create trigger inv_account_portfolio_prod_upd
  before update on account_portfolio_product
  for each row
  declare
  begin
    invalidation.on_mutate( 'account_portfolio_product', 'upd', :old.account_id, :old.institution_code||','||:old.branch_id||','||:old.account_id||','||:old.portfolio_code||','||:old.product_id||','||:old.market_code||','||:old.buy_price );
  end;
/
show errors

create trigger inv_account_portfolio_prod_del
  before delete on account_portfolio_product
  for each row
  declare
  begin
    invalidation.on_mutate( 'account_portfolio_product', 'del', :old.account_id, :old.institution_code||','||:old.branch_id||','||:old.account_id||','||:old.portfolio_code||','||:old.product_id||','||:old.market_code||','||:old.buy_price );
  end;
/
show errors

@
